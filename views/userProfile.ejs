<link rel="stylesheet" type="text/css" href="/css/user_profile.css">

<div id='profile-container'>
<div id='profile-detail-container'>
<div id='profile-heading'>
	<% if(user._id .equals(profile_user._id)){ %>
		My Profile
	<% }else{ %>
		<%= profile_user.name %>'s Profile
	<% } %>
</div>
<div id='profile-detail'>
<% if(profile_user.name){ %>
<div><span class='user-detail-property'>Name</span> : <span class='user-detail-value'><%= profile_user.name %></span></div>	
<% } %>
<% if(profile_user.email){ %>
<div><span class='user-detail-property'>E-Mail</span> : <span class='user-detail-value'><%= profile_user.email %></span></div>	
<% } %>
<% if(profile_user.rollNo){ %>
<div><span class='user-detail-property'>Roll Number</span> : <span class='user-detail-value'><%= profile_user.rollNo %></span></div>	
<% } %>
<% if(profile_user.mobile){ %>
<div><span class='user-detail-property'>Mobile</span> : <span class='user-detail-value'><%= profile_user.mobile %></span></div>	
<% } %>
<% if(profile_user.branch){ %>
<div><span class='user-detail-property'>Branch</span> : <span class='user-detail-value'><%= profile_user.branch %></span></div>	
<% } %>
<% if(profile_user.course){ %>
<div><span class='user-detail-property'>Course</span> : <span class='user-detail-value'><%= profile_user.course %></span></div>	
<% } %>
</div>
</div>
<% if(locals.user.id == profile_user.id){ %>
<div id='update-profile-container'>
<button><a href='/users/profile/<%= profile_user.id %>/edit'>Update Profile</a></button>
</div>
<% } %>
<div id='books-record-container'>

<div id='past-books-container'>
<div>Past Books</div>
<div>
	<% for(record of profile_user.pastBooks){ %>
		<div class='book-detail'><%= record.book.name %> : <small><%= moment(record.createdAt).format('lll') %></small></div>
	<% } %>
</div>
</div>

<div id='issued-books-container'>
<div>Issued Books</div>
<div>
<% for(record of profile_user.availedBooks){ %>
	<div class='book-detail'><%= record.book.name %> : <small><%= moment(record.createdAt).format('lll') %></small>
		<% if(locals.user.email == locals.adminEmail){ %>
		<!-- only admin can return it -->
		<form action='/library/book/<%=record.book.id %>/return' method='get'>
			<input type = 'hidden' name='user_id' value = '<%= profile_user._id %>'>
			<button>Return</button>
		</form>
		<% } %>
	</div>
<% } %>
</div>
</div>

</div>
